tic()
scl_l. <- scl %>%
pivot_longer(cols = c(GENRD1,RD1,GENRD2,RD2,GENRD3,RD3),
names_to = "RDcat", values_to = "RDtype") %>%
arrange(SITEVISITID,TRANSECT,SEGMENT,GROUP,COLONYID,RDcat,RDtype) %>%
as.data.frame()
toc()
all.equal(scl_l,scl_l.)
str(scl_l)
str(scl_l.)
tic()
scl_l. <- scl %>%
pivot_longer(cols = c(GENRD1,RD1,GENRD2,RD2,GENRD3,RD3),
names_to = "RDcat", values_to = "RDtype") %>%
mutate(RDcat=factor(RDcat)) %>%
arrange(SITEVISITID,TRANSECT,SEGMENT,GROUP,COLONYID,RDcat,RDtype) %>%
as.data.frame()
toc()
all.equal(scl_l,scl_l.)
ca=read.csv("C:/Users/Thomas.Oliver/Downloads/Cruise Activities .csv")
ca2=read.csv("C:/Users/Thomas.Oliver/Downloads/Cruise Activities 02.csv")
head(ca)
head(ca2)
library(tidyverse)
#Fish
ca %>% filter(Type=="Fish")
#Fish
ca %>% filter(Type=="Fish") %>% summarize(length(which(Fish.Rea.Survey.Yn=="YES")))
#SfM
ca %>% filter(Type=="Fish") %>% summarize(length(which(Sfm.Yn=="YES")))
#Fish
ca %>% filter(Type=="Fish") %>% summarize(length(which(Fish.Rea.Survey.Yn=="YES")))
#SfM
ca %>% filter(Type=="Fish") %>% summarize(length(which(Sfm.Yn=="YES")))
#PQ
ca %>% filter(Type=="Fish") %>% summarize(length(which(Photoquad.Yn=="YES")))
#CTD
ca %>% filter(Type=="Fish") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
#CTD
ca %>% filter(Type!="Fish") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
#CTD
ca %>% filter(Type=="Oceanography") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
ca2a=read.csv("C:/Users/Thomas.Oliver/Downloads/Cruise Activities 02A.csv")
table(ca2a$Type)
#Fish
ca2a %>% filter(Type=="Fish") %>% summarize(length(which(Fish.Rea.Survey.Yn=="YES")))
#SfM
ca2a %>% filter(Type=="Fish") %>% summarize(length(which(Sfm.Yn=="YES")))
#PQ
ca2a %>% filter(Type=="Fish") %>% summarize(length(which(Photoquad.Yn=="YES")))
#CTD
ca2a %>% filter(Type=="Fish") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
#CTD
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="YES") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
#CTD
ca2a %>% filter(Type=="Fish",OFFSHORE=="NO") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
#CTD
ca2a %>% filter(Type=="Fish",OFFSHORE=="NO") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
#CTD
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="NO") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
#CTD
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="YES") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
#H20
ca2a %>% filter(Type=="Fish",OFFSHORE=="NO") %>% summarize(length(which(H2o.Activity.Yn=="YES")))
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="NO") %>% summarize(length(which(H2o.Activity.Yn=="YES")))
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="YES") %>% summarize(length(which(H2o.Activity.Yn=="YES")))
#CTD
ca2a %>% filter(Type=="Fish",OFFSHORE=="NO") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="NO") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="YES") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
ca2a$Region="MARIAN"
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn)
tab1
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn)
tab1
?rename
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn) %>%
rename(Region,SiteID,Latitude,Longitude,FishSPC,BenthicSFM,Photoquad,CTD-H2O)
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn)
tab1
tab1[,c("Fish.Rea.Survey.Yn","Sfm.Yn","Photoquad.Yn","H2o.Activity.Yn")]
tab1[,c("Fish.Rea.Survey.Yn","Sfm.Yn","Photoquad.Yn","H2o.Activity.Yn")] %>% sub("YES","X")
sub(pattern="YES",replacement="X",x=tab1[,c("Fish.Rea.Survey.Yn","Sfm.Yn","Photoquad.Yn","H2o.Activity.Yn")])
sub("YES","X",ca2a$Fish.Rea.Survey.Yn)
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn) %>%
mutate(Fish.Rea.Survey.Yn=sub("YES","X"))
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn) %>%
mutate(Fish.Rea.Survey.Yn=sub("YES","X",Fish.Rea.Survey.Yn))
tab1
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn) %>%
mutate(Fish.Rea.Survey.Yn=sub("NO","",sub("YES","X",Fish.Rea.Survey.Yn)))
tab1
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn) %>%
mutate(Fish.Rea.Survey.Yn=sub("NO","",sub("YES","X",Fish.Rea.Survey.Yn)),
Sfm.Yn=sub("NO","",sub("YES","X",Sfm.Yn)),
Photoquad.Yn=sub("NO","",sub("YES","X",Photoquad.Yn)),
H2o.Activity.Yn=sub("NO","",sub("YES","X",H2o.Activity.Yn)))
tab1
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn) %>%
mutate(Fish.Rea.Survey.Yn=sub("NO","",sub("YES","X",Fish.Rea.Survey.Yn)),
Sfm.Yn=sub("NO","",sub("YES","X",Sfm.Yn)),
Photoquad.Yn=sub("NO","",sub("YES","X",Photoquad.Yn)),
H2o.Activity.Yn=sub("NO","",sub("YES","X",H2o.Activity.Yn))) %>%
rename(Fish_SPC=Fish.Rea.Survey.Yn)
tab1
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn) %>%
mutate(Fish.Rea.Survey.Yn=sub("NO","",sub("YES","X",Fish.Rea.Survey.Yn)),
Sfm.Yn=sub("NO","",sub("YES","X",Sfm.Yn)),
Photoquad.Yn=sub("NO","",sub("YES","X",Photoquad.Yn)),
H2o.Activity.Yn=sub("NO","",sub("YES","X",H2o.Activity.Yn))) %>%
rename(Fish_SPC=Fish.Rea.Survey.Yn,
Benthic_SfM=Sfm.Yn,
Benthic_Photoquad=Photoquad.Yn,
CTD_H2O=H2o.Activity.Yn)
tab1
write.csv(tab1,"C:/Users/Thomas.Oliver/Downloads/CruiseReport_Table1.csv")
#Activities:
ca2a %>%
filter(Type=="Fish") %>%
group_by(Date)
#Activities:
ca2a %>%
group_by(Date) %>%
summary(Fish=length(which(Type=="Fish",Fish.Rea.Survey.Yn=="YES")))
ca2a %>%
group_by(Date) %>%
summary(Fish=length(which(Type=="Fish",Fish.Rea.Survey.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>%
summary(Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>%
summarize(Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>%
summarize(PQ=Fish=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
#Activities:
ca2a %>%
group_by(Date) %>%
summarize(PQ=Fish=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
#Activities:
ca2a %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")))
head(ca2a)
#Activities:
ca2a %>%
group_by(Survey.Utc.Dtm) %>% sort(Survey.Utc.Dtm) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>% sort(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>% arrange(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>%
arrange(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STR=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>%
arrange(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STR=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAU=length(which(Type=="Oceanography"&Caus.Deploy.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>%
arrange(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),            CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STR=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAU=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>%
arrange(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STR=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAU=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES")))
#Activities:
ca2a %>%
group_by(Date) %>%
arrange(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STR=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAU=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"))) %>% View()
#Activities:
ca2a %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STR=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAU=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"))) %>%
arrange(Date) %>%
View()
ca2a$Date
as.Date(ca2a$Date)
dmy(ca2a$Date)
#Activities:
ca2a %>%
mutate(Date=dmy(ca2a$Date)) %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STR=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAU=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"))) %>%
arrange(Date) %>%
View()
#Activities:
ActTable=ca2a %>%
mutate(Date=dmy(ca2a$Date)) %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STR=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAU=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"))) %>%
arrange(Date) %>%
View()
write.csv(ActTable,"C:/Users/Thomas.Oliver/Downloads/CruiseReport_ActTable.csv")
#Activities:
ActTable=ca2a %>%
mutate(Date=dmy(ca2a$Date)) %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STR=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAU=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"))) %>%
arrange(Date)
ActTable
write.csv(ActTable,"C:/Users/Thomas.Oliver/Downloads/CruiseReport_ActTable.csv")
ca2a=read.csv("C:/Users/Thomas.Oliver/Downloads/Cruise Activities 02A.csv")
#Activities:
ActTable=ca2a %>%
mutate(Date=dmy(ca2a$Date)) %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STRr=length(which(Type=="Oceanography"&Str.Rec.Activity.Yn=="YES")),
STRd=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAUr=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
CAUd=length(which(Type=="Oceanography"&Caus.Deploy.Yn=="YES")),
BMUr=length(which(Type=="Oceanography"&BMU.Retrieve.Yn=="YES")),
BMUd=length(which(Type=="Oceanography"&BMUs.Deploy.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"))) %>%
arrange(Date)
library(tidyverse)
#Activities:
ActTable=ca2a %>%
mutate(Date=dmy(ca2a$Date)) %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STRr=length(which(Type=="Oceanography"&Str.Rec.Activity.Yn=="YES")),
STRd=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAUr=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
CAUd=length(which(Type=="Oceanography"&Caus.Deploy.Yn=="YES")),
BMUr=length(which(Type=="Oceanography"&BMU.Retrieve.Yn=="YES")),
BMUd=length(which(Type=="Oceanography"&BMUs.Deploy.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"))) %>%
arrange(Date)
#Activities:
ActTable=ca2a %>%
mutate(Date=dmy(ca2a$Date)) %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STRr=length(which(Type=="Oceanography"&Str.Rec.Activity.Yn=="YES")),
STRd=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAUr=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
CAUd=length(which(Type=="Oceanography"&Caus.Deploy.Yn=="YES")),
BMUr=length(which(Type=="Oceanography"&Bmus.Retrieve.Ynn=="YES")),
BMUd=length(which(Type=="Oceanography"&Bmus.Deploy.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"))) %>%
arrange(Date)
#Activities:
ActTable=ca2a %>%
mutate(Date=dmy(ca2a$Date)) %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STRr=length(which(Type=="Oceanography"&Str.Rec.Activity.Yn=="YES")),
STRd=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAUr=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
CAUd=length(which(Type=="Oceanography"&Caus.Deploy.Yn=="YES")),
BMUr=length(which(Type=="Oceanography"&Bmus.Retrieve.Yn=="YES")),
BMUd=length(which(Type=="Oceanography"&Bmus.Deploy.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"))) %>%
arrange(Date)
write.csv(ActTable,"C:/Users/Thomas.Oliver/Downloads/CruiseReport_ActTable.csv")
head(ca2a)
write.csv(ActTable,"C:/Users/Thomas.Oliver/Downloads/CruiseReport_ActTable.csv")
#Activities:
ActTable=ca2a %>%
mutate(Date=dmy(ca2a$Date)) %>%
group_by(Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STRr=length(which(Type=="Oceanography"&Str.Rec.Activity.Yn=="YES")),
STRd=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAUr=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
CAUd=length(which(Type=="Oceanography"&Caus.Deploy.Yn=="YES")),
BMUr=length(which(Type=="Oceanography"&Bmus.Retrieve.Yn=="YES")),
BMUd=length(which(Type=="Oceanography"&Bmus.Deploy.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"&OFFSHORE=="NO")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES"&OFFSHORE=="NO")),
h2oFO=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"&OFFSHORE=="YES")),
h2oRO=length(which(Type=="Fish"&H2o.Activity.Yn=="YES"&OFFSHORE=="YES"))) %>%
arrange(Date)
ActTable
ActTable$Leg=1
ActTable$Leg[which(ActTable$Date>ymd("2025-04-22"))]=2
ActTable$Leg[which(ActTable$Date>ymd("2025-05-08"))]=3
ActTable$Leg[which(ActTable$Date>ymd("2025-06-01"))]=4
ActTable %>% group_by(Leg) %>% summarize(h2oF=sum(h2oF),h2oR=sum(h2oR),h2oFO=sum(h2oFO),h2oRO=sum(h2oRO))
View(ActTable[,c("Date","h2oFO")])
tab1
library(tidyverse)
#ca=read.csv("C:/Users/Thomas.Oliver/Downloads/Cruise Activities .csv")
ca2a=read.csv("C:/Users/Thomas.Oliver/Downloads/Cruise Activities 02A.csv")
#head(ca)
head(ca2)
#Fish
ca2a %>% filter(Type=="Fish") %>% summarize(length(which(Fish.Rea.Survey.Yn=="YES")))
#SfM
ca2a %>% filter(Type=="Fish") %>% summarize(length(which(Sfm.Yn=="YES")))
#PQ
ca2a %>% filter(Type=="Fish") %>% summarize(length(which(Photoquad.Yn=="YES")))
#CTD
ca2a %>% filter(Type=="Fish",OFFSHORE=="NO") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="NO") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="YES") %>% summarize(length(which(Ctd.Activity.Yn=="YES")))
#H20
ca2a %>% filter(Type=="Fish",OFFSHORE=="NO") %>% summarize(length(which(H2o.Activity.Yn=="YES")))
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="NO") %>% summarize(length(which(H2o.Activity.Yn=="YES")))
ca2a %>% filter(Type=="Oceanography",OFFSHORE=="YES") %>% summarize(length(which(H2o.Activity.Yn=="YES")))
ca2a$Region="MARIAN"
tab1=ca2a %>%
filter(Type=="Fish") %>%
select(Region,Site,Latitude,Longitude,Fish.Rea.Survey.Yn,Sfm.Yn,Photoquad.Yn,H2o.Activity.Yn) %>%
mutate(Fish.Rea.Survey.Yn=sub("NO","",sub("YES","X",Fish.Rea.Survey.Yn)),
Sfm.Yn=sub("NO","",sub("YES","X",Sfm.Yn)),
Photoquad.Yn=sub("NO","",sub("YES","X",Photoquad.Yn)),
H2o.Activity.Yn=sub("NO","",sub("YES","X",H2o.Activity.Yn))) %>%
rename(Fish_SPC=Fish.Rea.Survey.Yn,
Benthic_SfM=Sfm.Yn,
Benthic_Photoquad=Photoquad.Yn,
CTD_H2O=H2o.Activity.Yn)
ca=read.csv("C:/Users/Thomas.Oliver/Downloads/Cruise Activities .csv")
ca
ca2a$Site
ca2a$Island=substr(ca2a$Site,1,3)
ca2a$Island
#Activities:
ActTable=ca2a %>%
mutate(Date=dmy(ca2a$Date)) %>%
group_by(Island,Date) %>%
summarize(PQ=length(which(Type=="Fish"&Photoquad.Yn=="YES")),
Fish=length(which(Type=="Fish"&Fish.Rea.Survey.Yn=="YES")),
SfM=length(which(Type=="Fish"&Sfm.Yn=="YES")),
CarbBudg=length(which(Type=="Oceanography"&Cb.Activity.Yn=="YES")),
STRr=length(which(Type=="Oceanography"&Str.Rec.Activity.Yn=="YES")),
STRd=length(which(Type=="Oceanography"&Str.Dep.Activity.Yn=="YES")),
CAUr=length(which(Type=="Oceanography"&Caus.Retrieve.Yn=="YES")),
CAUd=length(which(Type=="Oceanography"&Caus.Deploy.Yn=="YES")),
BMUr=length(which(Type=="Oceanography"&Bmus.Retrieve.Yn=="YES")),
BMUd=length(which(Type=="Oceanography"&Bmus.Deploy.Yn=="YES")),
h2oF=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"&OFFSHORE=="NO")),
h2oR=length(which(Type=="Fish"&H2o.Activity.Yn=="YES"&OFFSHORE=="NO")),
h2oFO=length(which(Type=="Oceanography"&H2o.Activity.Yn=="YES"&OFFSHORE=="YES")),
h2oRO=length(which(Type=="Fish"&H2o.Activity.Yn=="YES"&OFFSHORE=="YES"))) %>%
arrange(Date)
ActTable$Leg=1
ActTable$Leg[which(ActTable$Date>ymd("2025-04-22"))]=2
ActTable$Leg[which(ActTable$Date>ymd("2025-05-08"))]=3
ActTable$Leg[which(ActTable$Date>ymd("2025-06-01"))]=4
ActTable
ActTable %>% group_by(Leg) %>%
summarize(ISL=paste(unique(Island),sep="."),
Fish=sum(Fish),
h2oF=sum(h2oF),
h2oR=sum(h2oR),
h2oFO=sum(h2oFO),
h2oRO=sum(h2oRO))
ActTable %>% group_by(Leg) %>%
summarize(ISL=paste(unique(Island),collapse="."),
Fish=sum(Fish),
h2oF=sum(h2oF),
h2oR=sum(h2oR),
h2oFO=sum(h2oFO),
h2oRO=sum(h2oRO))
ActTable %>% group_by(Leg) %>%
summarize(ISL=paste(unique(Island),collapse="."),
Fish=sum(Fish),
SfM=sum(SfM),
PQ=sum(PQ),
h2oF=sum(h2oF),
h2oR=sum(h2oR),
h2oFO=sum(h2oFO),
h2oRO=sum(h2oRO))
ActTable %>% group_by(Leg) %>%
summarize(ISL=paste(unique(Island),collapse="."),
Days=length(unique(Date)),
Fish=sum(Fish),
SfM=sum(SfM),
PQ=sum(PQ),
h2oF=sum(h2oF),
h2oR=sum(h2oR),
h2oFO=sum(h2oFO),
h2oRO=sum(h2oRO))
ActTable %>% group_by(Leg) %>%
summarize(ISL=paste(unique(Island),collapse="."),
Days=length(unique(Date)),
Fish=sum(Fish),
SfM=sum(SfM),
PQ=sum(PQ),
h2oF=sum(h2oF),
h2oR=sum(h2oR),
h2oFO=sum(h2oFO),
h2oRO=sum(h2oRO))
rea=read.csv("T:/Benthic/Data/REA Coral Demography & Cover/Analysis Ready Raw data/CoralBelt_Adults_raw_CLEANED_2023.csv")
rea %>% filter(ISLAND=="SWA")
rea %>% filter(ISLAND=="Swains")
library(tidyverse)
rea %>% filter(ISLAND=="Swains")
rea %>% filter(ISLAND=="Swains",SPCODE=="ARET")
rea %>% filter(ISLAND=="Swains",SPCODE=="ARET") %>% write_csv("C:/Users/Thomas.Oliver/Downloads/ARET_SWAINS23.csv")
