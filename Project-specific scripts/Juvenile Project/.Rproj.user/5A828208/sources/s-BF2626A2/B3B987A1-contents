
rm(list=ls())
library(raster)
library(grid)

#fpath="C:/Users/Thomas.Oliver/WORK/Projects/FY22/CoralNet/StratifiedAnnotation"

fpath="C:/Users/jon.ehrenberg/WORK/Projects/FY22/CoralNet/Coral Bleaching Classifier/Bleaching Classifier/High Bleaching Sites/TNC/Site26_Shallow2015/group1/"

lf=list.files(fpath,pattern = "(.JPG|.jpg|.JPEG|.jpeg)",full.names = F)
lff=list.files(fpath,pattern = "(.JPG|.jpg|.JPEG|.jpeg)",full.names = T)

r=stack(lff[1])
plotRGB(r)
text(dim(r)[2]/2,dim(r)[1]/2,
     "Welcome To Point Annotator - Point Review",
     col="white",cex=3)
Sys.sleep(3)
plotRGB(r)
text(dim(r)[2]/2,dim(r)[1]/2,
     "Change Plot Window Size Until \nThere Are No White Edges,\nOr Point Addresses Will Be Wrong!!!\n Hit Return In the Console When Done.",
     col="white",cex=3)
readline("Click on Console and Hit Return to Proceed...")
dev.off()
Sys.sleep(1)

#make sure to replace "_____.csv" with file name of all annotations .csv file

AnnFile=read.csv(paste0(fpath,"R_Annotations_Site26Shallow_2015IMG_3472_AppendedCNannonations.csv"))
dotcol=c("black","green","grey75")
names(dotcol)=c("*UNK","*CORAL","*CORAL_BL")
for(i in 1:length(lff)){
  print(paste0("Loading Image ",i," of ",length(lff)))
  r=stack(lff[i])
  plotRGB(r)
  
  thisimann=subset(AnnFile,Name==lf[i])
  points(thisimann$Column,thisimann$Row,col=dotcol[thisimann$Label],pch=21,cex=3,lwd=2)
  In=readline("Go to Next Image?")
}




