xmax = st_bbox(.)[["xmax"]],
ymin = -15,
ymax = 30))
#convert delta data to spdf
xy <- deltaden_coords[,c(5,4)]
deltaden_coords_sp <- SpatialPointsDataFrame(coords = xy, data = deltaden_coords,
proj4string = CRS("+proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0"))
delta_shift <- deltaden_coords_sp %>%
st_as_sf() %>%
st_shift_longitude() %>%
st_crop(c(xmin = 120, xmax = 250, ymin = -50, ymax = 30)) %>%
# Also adds the coordinates to be used for labeling with geom_text_repel
bind_cols(st_coordinates(.) %>% as.data.frame())
p11<-ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 4,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
#scale_color_viridis(direction=-1)
#scale_color_viridis(option="C",direction=-1)
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
ggtitle("Change in Juvenile Colony Density/Year")
ggsave(plot=p8,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DensityRegionalTemporal.jpg",width=10,height=5)
ggsave(plot=p9,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaRegional.jpg",width=10,height=5)
ggsave(plot=p10,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIsland.jpg",width=10,height=5)
ggsave(plot=p11,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIslandmap.jpg",width=10,height=8)
p11<-ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 3.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
#scale_color_viridis(direction=-1)
#scale_color_viridis(option="C",direction=-1)
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
ggtitle("Change in Juvenile Colony Density/Year")
ggsave(plot=p8,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DensityRegionalTemporal.jpg",width=10,height=5)
ggsave(plot=p9,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaRegional.jpg",width=10,height=5)
ggsave(plot=p10,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIsland.jpg",width=10,height=5)
ggsave(plot=p11,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIslandmap.jpg",width=10,height=8)
p11<-ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 3,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
#scale_color_viridis(direction=-1)
#scale_color_viridis(option="C",direction=-1)
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
ggtitle("Change in Juvenile Colony Density/Year")
ggsave(plot=p8,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DensityRegionalTemporal.jpg",width=10,height=5)
ggsave(plot=p9,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaRegional.jpg",width=10,height=5)
ggsave(plot=p10,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIsland.jpg",width=10,height=5)
ggsave(plot=p11,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIslandmap.jpg",width=10,height=8)
p11<-ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
#scale_color_viridis(direction=-1)
#scale_color_viridis(option="C",direction=-1)
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
ggtitle("Change in Juvenile Colony Density/Year")
ggsave(plot=p8,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DensityRegionalTemporal.jpg",width=10,height=5)
ggsave(plot=p9,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaRegional.jpg",width=10,height=5)
ggsave(plot=p10,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIsland.jpg",width=10,height=5)
ggsave(plot=p11,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIslandmap.jpg",width=10,height=8)
ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
theme(legend.position = c(-10,-145))+
#scale_color_viridis(direction=-1)
#scale_color_viridis(option="C",direction=-1)
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
ggtitle("Change in Juvenile Colony Density/Year")
ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
theme(legend.position = c(-10,-145))+
annotation_scale(location = "bl", width_hint = 0.4)+
#scale_color_viridis(direction=-1)
#scale_color_viridis(option="C",direction=-1)
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
ggtitle("Change in Juvenile Colony Density/Year")
?scale_color_gradient2
ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
annotation_scale(location = "bl", width_hint = 0.4)+
#scale_color_viridis(direction=-1)
#scale_color_viridis(option="C",direction=-1)
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
theme(legend.position = c(-10,-145))+
ggtitle("Change in Juvenile Colony Density/Year")
ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
annotation_scale(location = "bl", width_hint = 0.4)+
#scale_color_viridis(direction=-1)
#scale_color_viridis(option="C",direction=-1)
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
theme(legend.position = c(0.9,0.2))+
ggtitle("Change in Juvenile Colony Density/Year")
ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
annotation_scale(location = "bl", width_hint = 0.4)+
#scale_color_viridis(direction=-1)
#scale_color_viridis(option="C",direction=-1)
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
theme(legend.position = c(0.95,0.2))+
ggtitle("Change in Juvenile Colony Density/Year")
ggplot() +
geom_sf(data = pacific_crop2)
box_cut2 <- bbox2SP(n = 90, s = -90, w = -120, e = 120, proj4string = world@proj4string)
world_crop2 <- gDifference(world, box_cut2)
pacific_crop2 <- world_crop2 %>%
st_as_sf() %>% # change from sp to sf object/class
st_shift_longitude() %>%
st_crop(c(xmin = st_bbox(.)[["xmin"]],
xmax = st_bbox(.)[["xmax"]],
ymin = -40,
ymax = 40))
ggplot() +
geom_sf(data = pacific_crop2)
box_cut2 <- bbox2SP(n = 90, s = -90, w = -110, e = 110, proj4string = world@proj4string)
world_crop2 <- gDifference(world, box_cut2)
pacific_crop2 <- world_crop2 %>%
st_as_sf() %>% # change from sp to sf object/class
st_shift_longitude() %>%
st_crop(c(xmin = st_bbox(.)[["xmin"]],
xmax = st_bbox(.)[["xmax"]],
ymin = -40,
ymax = 40))
ggplot() +
geom_sf(data = pacific_crop2)
box_cut2 <- bbox2SP(n = 90, s = -90, w = -110, e = 110, proj4string = world@proj4string)
world_crop2 <- gDifference(world, box_cut2)
pacific_crop2 <- world_crop2 %>%
st_as_sf() %>% # change from sp to sf object/class
st_shift_longitude() %>%
st_crop(c(xmin = st_bbox(.)[["xmin"]],
xmax = st_bbox(.)[["xmax"]],
ymin = -40,
ymax = 50))
ggplot() +
geom_sf(data = pacific_crop2)
ggplot() +
geom_sf(data = pacific_crop2)+
geom_rect(
xmin = -150,
ymin = -15,
xmax = 140,
ymax = 30,
fill = NA,
colour = "black",
size = 0.6
)
?theme_void
ggplot() +
geom_sf(data = pacific_crop2)+
geom_rect(
xmin = -150,
ymin = -15,
xmax = 140,
ymax = 30,
fill = NA,
colour = "black",
size = 2
)
ggplot() +
geom_sf(data = pacific_crop2)+
geom_sf(data = pacific_crop, fill = NA, color = "black", size = 1.2)
pacific_crop_bb = st_as_sfc(st_bbox(pacific_crop))
ggplot() +
geom_sf(data = pacific_crop2)+
geom_sf(data = pacific_crop_bb, fill = NA, color = "black", size = 1.2)
install.packages("cowplot")
library(cowplot)
insetmap<-ggplot() +
geom_sf(data = pacific_crop2)+
geom_sf(data = pacific_crop_bb, fill = NA, color = "black", size = 1.2)
deltamap<-ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
annotation_scale(location = "bl", width_hint = 0.4)+
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
theme(legend.position = c(0.95,0.2))+
#ggtitle("Change in Juvenile Colony Density/Year")
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.2, y = 0.2, width = 0.3, height = 0.3)
gg_inset_map1
deltamap
deltamap<-ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
annotation_scale(location = "bl", width_hint = 0.4)+
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
theme(legend.position = c(0.95,0.2))+
#ggtitle("Change in Juvenile Colony Density/Year")
deltamap<-ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
annotation_scale(location = "bl", width_hint = 0.4)+
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="Delta Density/Year")+
theme(legend.position = c(0.95,0.2))
#ggtitle("Change in Juvenile Colony Density/Year")
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.2, y = 0.2, width = 0.3, height = 0.3)
gg_inset_map1
?geom_sf
ggplot() +
geom_sf(data = pacific_crop2)+
geom_sf(data = pacific_crop_bb, fill = NA, color = "black", size = 1.2)+
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
rect = element_blank())
insetmap<-ggplot() +
geom_sf(data = pacific_crop2)+
geom_sf(data = pacific_crop_bb, fill = NA, color = "black", size = 1.2)+
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
rect = element_blank())
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.2, y = 0.2, width = 0.3, height = 0.3)
gg_inset_map1
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.1, y = 0.1, width = 0.3, height = 0.3)
gg_inset_map1
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.08, y = 0.1, width = 0.3, height = 0.3)
gg_inset_map1
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.07, y = 0.1, width = 0.3, height = 0.3)
gg_inset_map1
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.07, y = 0.2, width = 0.3, height = 0.3)
gg_inset_map1
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.07, y = 0.13, width = 0.3, height = 0.3)
gg_inset_map1
insetmap<-ggplot() +
geom_sf(data = pacific_crop2)+
geom_sf(data = pacific_crop_bb, fill = NA, color = "black", size = 1.2)+
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
rect = element_blank())+
st_as_sfc(st_bbox(pacific_crop2)) #draw box around area of main map
pacific_box = st_as_sfc(st_bbox(pacific_crop2)) #draw box around area of main map
insetmap<-ggplot() +
geom_sf(data = pacific_crop2)+
geom_sf(data = pacific_crop_bb, fill = NA, color = "black", size = 1.2)+
geom_sf(data = pacific_box, fill = NA, color = "black", size = 1.2)+
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
rect = element_blank())
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.07, y = 0.13, width = 0.3, height = 0.3)
gg_inset_map1
?st_bbox
?st_as_sfc
insetmap<-ggplot() +
geom_sf(data = pacific_crop2)+
geom_sf(data = pacific_crop_bb, fill = NA, color = "black", size = 1.2)+
geom_sf(data = pacific_box, fill = NA, color = "black", size = 0.8)+
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
rect = element_blank())
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.07, y = 0.13, width = 0.3, height = 0.3)
gg_inset_map1
insetmap<-ggplot() +
geom_sf(data = pacific_crop2)+
geom_sf(data = pacific_crop_bb, fill = NA, color = "black", size = 1.2)+
geom_sf(data = pacific_box, fill = NA, color = "black", size = 0.4)+
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
rect = element_blank())
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.07, y = 0.13, width = 0.3, height = 0.3)
gg_inset_map1
deltamap<-ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 2.5,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
annotation_scale(location = "bl", width_hint = 0.4)+
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
theme(legend.position = c(0.95,0.2))
#ggtitle("Change in Juvenile Colony Density/Year")
gg_inset_map1 = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.07, y = 0.13, width = 0.3, height = 0.3)
gg_inset_map1
finalmap = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.07, y = 0.13, width = 0.3, height = 0.3)
finalmap
ggsave(plot=finalmap,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIslandmap.jpg",width=10,height=8)
deltamap<-ggplot() +
geom_sf(data = pacific_crop)+
geom_sf(data = delta_shift,aes(color = DeltaDen), size = 3, shape = 19)+
#coord_sf(xlim = c(120, 250), expand = FALSE) +
geom_text_repel(data = delta_shift,
aes(x = X...7, y = Y...8, label = ISLAND),
size = 3,
fontface = "bold",
segment.size = 0.25,
box.padding = 0.4,
min.segment.length = 0,
seed = 2020-5-16)+
annotation_scale(location = "bl", width_hint = 0.4)+
scale_color_gradient2(midpoint = 0.624,
high = 'forestgreen',
mid = 'yellow2',
low = 'red2',
na.value = 'gray95',
name="")+
theme(legend.position = c(0.95,0.2))
#ggtitle("Change in Juvenile Colony Density/Year")
finalmap = ggdraw() +
draw_plot(deltamap) +
draw_plot(insetmap, x = 0.07, y = 0.13, width = 0.3, height = 0.3)
finalmap
ggsave(plot=finalmap,file="C:/Users/Courtney.S.Couch/Documents/Courtney's Files/R Files/ESD/Juvenile Project/Figures/DeltaIslandmap.jpg",width=10,height=8)
