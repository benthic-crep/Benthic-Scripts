ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
)
Boxes
head(rmse.ssss)
head(Smm)
rmse.ssss<-subset(dfError,GENUS_CODE=="SSSS"&Comp%in%c("D1vD2","S1vS2","MO"))
#Rename error comparison names-can't get mutate:recode to work
comp.names<-data.frame(Comp=c("D1vD2","MO","S1vS2"),Comp2=c("In water Observer","Method Error","SfM Observer"))
rmse.ssss<-left_join(rmse.ssss,comp.names)
comporder<-c("In water Observer","SfM Observer","Method Error")
rmse.ssss <- rmse.ssss[ order(match(rmse.ssss$Comp2, comporder)),]
rmse.ssss$Comp2<-as.character(rmse.ssss$Comp2)
rmse.ssss$Comp2<-factor(rmse.ssss$Comp2, levels = comporder)
rmse.ssss$Metric<-as.character(rmse.ssss$Metric)
rmse.ssss$Metric<-factor(rmse.ssss$Metric,
levels=c("AdColDen","JuvColDen",
"BLE_prev","Ave.cl","Ave.od","Shannon","Richness"))
#Scaled MAE plot for manuscript
#Changing metric names to make more sense
metricnames<-data.frame(Metric=c("AdColDen","Ave.cl","Ave.od","BLE_prev","JuvColDen","Richness","Shannon"),
Metric.new=c("`Adult Density`","`Average Colony Length`","`Average Old Dead`",
"`Bleaching Prevalence`","`Juvenile Density`","`Adult Species Richness`",
"`Adult Shannon Diversity`"))
rmse.ssss<-left_join(rmse.ssss,metricnames)
#reorder metrics in plot
metricoder<- c("`Adult Density`","`Juvenile Density`","`Average Colony Length`","`Average Old Dead`",
"`Bleaching Prevalence`","`Adult Species Richness`","`Adult Shannon Diversity`")
rmse.ssss<- rmse.ssss[order(match(rmse.ssss$Metric.new, metricoder)),];head(rmse.ssss)
rmse.ssss$Metric.new<-as.character(rmse.ssss$Metric.new);head(rmse.ssss)
rmse.ssss$Metric.new<-factor(rmse.ssss$Metric.new, levels = metricoder);head(rmse.ssss)
#Identify significant difference between error types
rmse.sub<-subset(all.rmse,GENUS_CODE=="SSSS"&Comp%in%c("D1vD2","S1vS2","MO"))
rmse.sub<-subset(rmse.sub,Metric %in% c("AdColDen","JuvColDen","Ave.cl","Ave.od","BLE_prev","Richness","Shannon"))
comp.names<-data.frame(Comp=c("D1vD2","MO","S1vS2"),Comp2=c("In water Observer","Method Error","SfM Observer"))
rmse.sub<-left_join(rmse.sub,comp.names)
#We tested for normality and equal variance for all metrics- nothing could be transformed
#Ran post hoc tests with multiple test correction
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="AdColDen"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="AdColDen"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="JuvColDen"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="JuvColDen"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="BLE_prev"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="BLE_prev"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Ave.cl"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Ave.cl"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Ave.od"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Ave.od"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Richness"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Richness"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Shannon"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Shannon"),method="bh")
#Set up text labels for post hoc tests on plots
#rmse.ssss<- rmse.ssss[order(rmse.ssss$Metric.new),];rmse.ssss
rmse.ssss$sig<-c("a","b","ab",
"","ns","",
"a","b","a",
"","ns","",
"","ns","",
"","ns","",
"","ns","")
ScaledMAE_manuscript<-ggplot(rmse.ssss, aes(x=Comp2, y=MAE_sc.mn, fill=Metric.new)) +
geom_hline(yintercept = c(0,1))+
geom_bar(position="dodge",stat="identity") +
geom_errorbar(aes(ymin=MAE_sc.mn-MAE_sc.se, ymax=MAE_sc.mn+MAE_sc.se),width=.15, position=position_dodge(.9)) +
guides(fill=FALSE) + facet_wrap(.~ `Metric.new` , scales="fixed", labeller=label_parsed) +
ylab("Midpoint Scaled Mean Absolute Error")+
ylim(c(0,.5))+
xlab("Error Comparison")+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
)+
geom_text(data=rmse.ssss,aes(x=Comp2,y=MAE_sc.mn+MAE_sc.se,label=sig, group = Metric.new),
position = position_dodge(),
vjust = -0.5)
ScaledMAE_manuscript
ggsave(plot=ScaledMAE_manuscript,file="T:/Benthic/Data/SfM/Method Comparision/Figures/MAEScaled_Manuscript_Comparision.png",width=10,height=8)
SSSSmet=subset(data.sm,GENUS_CODE=="SSSS")[,c("SS","MethodRep","AdColDen","JuvColDen",
"BLE_prev","Ave.cl","Ave.od","Richness","Shannon")]
Smm=melt(SSSSmet,id.vars = c("SS","MethodRep"))
#Changing metric names to make more sense
metricnames<-data.frame(variable=c("AdColDen","Ave.cl","Ave.od","BLE_prev","JuvColDen","Richness","Shannon"),
variable2=c("`Adult Density`","`Average Colony Length`","`Average Old Dead`",
"`Bleaching Prevalence`","`Juvenile Density`","`Adult Species Richness`",
"`Adult Shannon Diversity`"))
Smm<-left_join(Smm,metricnames)
methodnames<-data.frame(MethodRep=c("DIVER_1","DIVER_2","SfM_1","SfM_2"),
MethodRep2=c("`Diver 1`","`Diver 2`","`SfM 1`","`SfM 2`"))
Smm<-left_join(Smm,methodnames)
#reorder metrics in plot
Smm<- Smm[order(match(Smm$variable2, metricoder)),];head(Smm)
Smm$variable2<-as.character(Smm$variable2);head(Smm)
Smm$variable2<-factor(Smm$variable2, levels = metricoder);head(Smm)
ggplot(Smm,aes(x=MethodRep,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~variable2,scale='free_y',nrow=2)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
)
ggplot(Smm,aes(x=MethodRep,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
)
Boxes=ggplot(Smm,aes(x=MethodRep,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
)
Boxes
Boxes=ggplot(Smm,aes(x=MethodRep,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
,strip.text.x = element_text( face = "bold"))
Boxes
Boxes=ggplot(Smm,aes(x=MethodRep,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
)
Boxes
ggsave(plot=Boxes,
file="T:/Benthic/Data/SfM/Method Comparision/Figures/Violin_Comparision_Manuscript.png",
width=10,height=6)
Boxes=ggplot(Smm,aes(x=MethodRep2,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
)
Boxes
ggsave(plot=Boxes,
file="T:/Benthic/Data/SfM/Method Comparision/Figures/Violin_Comparision_Manuscript.png",
width=10,height=6)
ScaledMAE_manuscript<-ggplot(rmse.ssss, aes(x=Comp2, y=MAE_sc.mn, fill=Metric.new)) +
geom_hline(yintercept = c(0,1))+
geom_bar(position="dodge",stat="identity") +
geom_errorbar(aes(ymin=MAE_sc.mn-MAE_sc.se, ymax=MAE_sc.mn+MAE_sc.se),width=.15, position=position_dodge(.9)) +
guides(fill=FALSE) + facet_wrap(.~ `Metric.new` , scales="fixed", labeller=label_parsed) +
ylab("Midpoint Scaled Mean Absolute Error")+
ylim(c(0,.5))+
xlab("Error Comparison")+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
,axis.title.y = element_text(face="bold"),
axis.title.x = element_text(face="bold"))+
geom_text(data=rmse.ssss,aes(x=Comp2,y=MAE_sc.mn+MAE_sc.se,label=sig, group = Metric.new),
position = position_dodge(),
vjust = -0.5)
ScaledMAE_manuscript
ggsave(plot=ScaledMAE_manuscript,file="T:/Benthic/Data/SfM/Method Comparision/Figures/MAEScaled_Manuscript_Comparision.png",width=10,height=8)
SSSSmet=subset(data.sm,GENUS_CODE=="SSSS")[,c("SS","MethodRep","AdColDen","JuvColDen",
"BLE_prev","Ave.cl","Ave.od","Richness","Shannon")]
Smm=melt(SSSSmet,id.vars = c("SS","MethodRep"))
#Changing metric names to make more sense
metricnames<-data.frame(variable=c("AdColDen","Ave.cl","Ave.od","BLE_prev","JuvColDen","Richness","Shannon"),
variable2=c("`Adult Density`","`Average Colony Length`","`Average Old Dead`",
"`Bleaching Prevalence`","`Juvenile Density`","`Adult Species Richness`",
"`Adult Shannon Diversity`"))
Smm<-left_join(Smm,metricnames)
methodnames<-data.frame(MethodRep=c("DIVER_1","DIVER_2","SfM_1","SfM_2"),
MethodRep2=c("`Diver 1`","`Diver 2`","`SfM 1`","`SfM 2`"))
Smm<-left_join(Smm,methodnames)
#reorder metrics in plot
Smm<- Smm[order(match(Smm$variable2, metricoder)),];head(Smm)
Smm$variable2<-as.character(Smm$variable2);head(Smm)
Smm$variable2<-factor(Smm$variable2, levels = metricoder);head(Smm)
Boxes=ggplot(Smm,aes(x=MethodRep2,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
,axis.title.y = element_text(face="bold"),
axis.title.x = element_text(face="bold"))
Boxes
ggsave(plot=Boxes,
file="T:/Benthic/Data/SfM/Method Comparision/Figures/Violin_Comparision_Manuscript.png",
width=10,height=6)
ggplot(Smm,aes(x=MethodRep2,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
,axis.title.y = element_text(face="bold"),
axis.title.x = element_text(face="bold"))
ggplot(Smm,aes(x=MethodRep2,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
#theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none"
,axis.title.y = element_text(face="bold"),
axis.title.x = element_text(face="bold"))
ggplot(Smm,aes(x=MethodRep2,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.title.y = element_text(face="bold")
,axis.title.x = element_text(face="bold")
,axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none")
ggplot(Smm,aes(x=MethodRep2,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none")+
theme(axis.title.y = element_text(face="bold")
,axis.title.x = element_text(face="bold"))
rmse.ssss<-subset(dfError,GENUS_CODE=="SSSS"&Comp%in%c("D1vD2","S1vS2","MO"))
#Rename error comparison names-can't get mutate:recode to work
comp.names<-data.frame(Comp=c("D1vD2","MO","S1vS2"),Comp2=c("In water Observer","Method Error","SfM Observer"))
rmse.ssss<-left_join(rmse.ssss,comp.names)
comporder<-c("In water Observer","SfM Observer","Method Error")
rmse.ssss <- rmse.ssss[ order(match(rmse.ssss$Comp2, comporder)),]
rmse.ssss$Comp2<-as.character(rmse.ssss$Comp2)
rmse.ssss$Comp2<-factor(rmse.ssss$Comp2, levels = comporder)
rmse.ssss$Metric<-as.character(rmse.ssss$Metric)
rmse.ssss$Metric<-factor(rmse.ssss$Metric,
levels=c("AdColDen","JuvColDen",
"BLE_prev","Ave.cl","Ave.od","Shannon","Richness"))
#Scaled MAE plot for manuscript
#Changing metric names to make more sense
metricnames<-data.frame(Metric=c("AdColDen","Ave.cl","Ave.od","BLE_prev","JuvColDen","Richness","Shannon"),
Metric.new=c("`Adult Density`","`Average Colony Length`","`Average Old Dead`",
"`Bleaching Prevalence`","`Juvenile Density`","`Adult Species Richness`",
"`Adult Shannon Diversity`"))
rmse.ssss<-left_join(rmse.ssss,metricnames)
#reorder metrics in plot
metricoder<- c("`Adult Density`","`Juvenile Density`","`Average Colony Length`","`Average Old Dead`",
"`Bleaching Prevalence`","`Adult Species Richness`","`Adult Shannon Diversity`")
rmse.ssss<- rmse.ssss[order(match(rmse.ssss$Metric.new, metricoder)),];head(rmse.ssss)
rmse.ssss$Metric.new<-as.character(rmse.ssss$Metric.new);head(rmse.ssss)
rmse.ssss$Metric.new<-factor(rmse.ssss$Metric.new, levels = metricoder);head(rmse.ssss)
#Identify significant difference between error types
rmse.sub<-subset(all.rmse,GENUS_CODE=="SSSS"&Comp%in%c("D1vD2","S1vS2","MO"))
rmse.sub<-subset(rmse.sub,Metric %in% c("AdColDen","JuvColDen","Ave.cl","Ave.od","BLE_prev","Richness","Shannon"))
comp.names<-data.frame(Comp=c("D1vD2","MO","S1vS2"),Comp2=c("In water Observer","Method Error","SfM Observer"))
rmse.sub<-left_join(rmse.sub,comp.names)
#We tested for normality and equal variance for all metrics- nothing could be transformed
#Ran post hoc tests with multiple test correction
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="AdColDen"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="AdColDen"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="JuvColDen"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="JuvColDen"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="BLE_prev"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="BLE_prev"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Ave.cl"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Ave.cl"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Ave.od"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Ave.od"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Richness"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Richness"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Shannon"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Shannon"),method="bh")
#Set up text labels for post hoc tests on plots
#rmse.ssss<- rmse.ssss[order(rmse.ssss$Metric.new),];rmse.ssss
rmse.ssss$sig<-c("a","b","ab",
"","ns","",
"a","b","a",
"","ns","",
"","ns","",
"","ns","",
"","ns","")
ScaledMAE_manuscript<-ggplot(rmse.ssss, aes(x=Comp2, y=MAE_sc.mn, fill=Metric.new)) +
geom_hline(yintercept = c(0,1))+
geom_bar(position="dodge",stat="identity") +
geom_errorbar(aes(ymin=MAE_sc.mn-MAE_sc.se, ymax=MAE_sc.mn+MAE_sc.se),width=.15, position=position_dodge(.9)) +
guides(fill=FALSE) + facet_wrap(.~ `Metric.new` , scales="fixed", labeller=label_parsed) +
ylab("Midpoint Scaled Mean Absolute Error")+
ylim(c(0,.5))+
xlab("Error Comparison")+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none")+
theme(axis.title.y = element_text(face="bold")
,axis.title.x = element_text(face="bold"))+
geom_text(data=rmse.ssss,aes(x=Comp2,y=MAE_sc.mn+MAE_sc.se,label=sig, group = Metric.new),
position = position_dodge(),
vjust = -0.5)
ScaledMAE_manuscript
ggsave(plot=ScaledMAE_manuscript,file="T:/Benthic/Data/SfM/Method Comparision/Figures/MAEScaled_Manuscript_Comparision.png",width=10,height=8)
SSSSmet=subset(data.sm,GENUS_CODE=="SSSS")[,c("SS","MethodRep","AdColDen","JuvColDen",
"BLE_prev","Ave.cl","Ave.od","Richness","Shannon")]
Smm=melt(SSSSmet,id.vars = c("SS","MethodRep"))
#Changing metric names to make more sense
metricnames<-data.frame(variable=c("AdColDen","Ave.cl","Ave.od","BLE_prev","JuvColDen","Richness","Shannon"),
variable2=c("`Adult Density`","`Average Colony Length`","`Average Old Dead`",
"`Bleaching Prevalence`","`Juvenile Density`","`Adult Species Richness`",
"`Adult Shannon Diversity`"))
Smm<-left_join(Smm,metricnames)
methodnames<-data.frame(MethodRep=c("DIVER_1","DIVER_2","SfM_1","SfM_2"),
MethodRep2=c("`Diver 1`","`Diver 2`","`SfM 1`","`SfM 2`"))
Smm<-left_join(Smm,methodnames)
#reorder metrics in plot
Smm<- Smm[order(match(Smm$variable2, metricoder)),];head(Smm)
Smm$variable2<-as.character(Smm$variable2);head(Smm)
Smm$variable2<-factor(Smm$variable2, levels = metricoder);head(Smm)
Boxes=ggplot(Smm,aes(x=MethodRep2,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none")+
theme(axis.title.y = element_text(face="bold")
,axis.title.x = element_text(face="bold"))
Boxes
ggsave(plot=Boxes,
file="T:/Benthic/Data/SfM/Method Comparision/Figures/Violin_Comparision_Manuscript.png",
width=10,height=6)
Smm=melt(SSSSmet,id.vars = c("SS","MethodRep"))
#Changing metric names to make more sense
metricnames<-data.frame(variable=c("AdColDen","Ave.cl","Ave.od","BLE_prev","JuvColDen","Richness","Shannon"),
variable2=c("`Adult Density`","`Average Colony Length`","`Average Old Dead`",
"`Bleaching Prevalence`","`Juvenile Density`","`Adult Species Richness`",
"`Adult Shannon Diversity`"))
Smm<-left_join(Smm,metricnames)
methodnames<-data.frame(MethodRep=c("DIVER_1","DIVER_2","SfM_1","SfM_2"),
MethodRep2=c("Diver 1","Diver 2","SfM 1","SfM 2"))
Smm<-left_join(Smm,methodnames)
#reorder metrics in plot
Smm<- Smm[order(match(Smm$variable2, metricoder)),];head(Smm)
Smm$variable2<-as.character(Smm$variable2);head(Smm)
Smm$variable2<-factor(Smm$variable2, levels = metricoder);head(Smm)
Boxes=ggplot(Smm,aes(x=MethodRep2,y=value,fill=variable2))+
geom_violin(draw_quantiles = c(.5),size=.5)+
geom_jitter(width=.25,height=0,color="gray",alpha=0.5)+
facet_wrap(.~`variable2`,scale='free_y',nrow=2,labeller=label_parsed)+
guides(fill=FALSE)+
ylab("Value")+
xlab("Method and Observer")+theme_bw()+
theme_bw() +
theme(
axis.text.x = element_text(angle = 0)
,plot.background = element_blank()
,panel.grid.major = element_blank()
,panel.grid.minor = element_blank()
,axis.ticks.x = element_blank() # no x axis ticks
,axis.title.x = element_text( vjust = -.0001) # adjust x axis to lower the same amount as the genus labels
,legend.position="none")+
theme(axis.title.y = element_text(face="bold")
,axis.title.x = element_text(face="bold"))
Boxes
ggsave(plot=Boxes,
file="T:/Benthic/Data/SfM/Method Comparision/Figures/Violin_Comparision_Manuscript.png",
width=10,height=6)
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Richness"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Richness"),method="bh")
kruskal.test(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Shannon"))
dunnTest(ae_sc ~ Comp, data=subset(rmse.sub,Metric=="Shannon"),method="bh")
